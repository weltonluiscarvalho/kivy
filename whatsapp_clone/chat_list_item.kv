<ChatListItem>:
  ripple_behavior: True #on click ripple effect
  md_bg_color: 0, 0, 0, 0
  elevation: 0
  size_hint_y: None
  padding: [10, 0, 10, 0]
  spacing: dp(10)
  height: chatAvatar.height + dp(10)
  Avatar:
    id: chatAvatar
    source: root.friend_avatar
    pos_hint: {'center_x': .5}
    radius: [30,]

  MDBoxLayout:
    orientation: 'vertical'
    padding: [0, 0, 0, 10]
    spacing: 2
    Label:
      id: chatUserName
      text: root.friend_name
      theme_text_color: 'Custom'
      size: self.texture_size
      size_hint: None, None
      font_size: sp(15)
      color: app.theme_cls.opposite_bg_normal
      bold: True
    MDLabel:
      id: lastMessage
      text: root.mssg
      height: self.texture_size[1]
      theme_text_color: 'Custom'
      size_hint_y: None
      bold: True
      font_size: sp(13)
      color: [.5, .5, .5, 1] if root.isRead != 'new' else app.theme_cls.primary_color
      shorten: True
      shorten_from: 'right'
  BoxLayout:
    orientation: 'vertical'
    width: time.width
    size_hint_x: None
    pos_hint: {'center_y': .5}
    spacing: dp(2)
    padding: [0, 15, 0, 5]
    Label:
      id: time
      text: root.timestamp
      size: self.texture_size
      size_hint: None, None
      font_size: sp(9)
      color: app.theme_cls.opposite_bg_normal

    MDIcon:
      #: set icons {'read': 'checkbox-multiple-marked-circle', 'delivered': 'checkbox-multiple-marked-circle-outline', 'new': 'circle'}
      id: chatIcon
      theme_text_color: 'Custom'
      icons: icons[root.isRead] if root.isRead in icons.keys() else ''
      size_hint: None, None
      font_size: dp(12)
      size: dp(20), dp(20)
      pos_hint: {'center_x': .5, 'center_y': .5}
      text_color: app.theme_cls.primary_color
